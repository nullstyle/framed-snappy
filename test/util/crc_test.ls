require! should
require! "../../lib/util/buffer"


describe "masked-crc", (...) -> 
  {masked-crc} = require("../../lib/util/crc")

  it 'should work', ->
    test-crc = (input, output) ->
      actual = masked-crc(new Buffer(input))
      expected = new Buffer(output)
      buffer.eq(actual, 0, expected, 0, 4).should.equal(true)

    test-crc [0x00, 0x00, 0x00, 0x01], [0xa2, 0x84, 0xea, 0xd8]
    test-crc [0x00, 0x00, 0x00, 0x02], [0xa2, 0x86, 0xea, 0xd8]
    test-crc [0x00, 0x00, 0x00, 0x03], [0xa2, 0x88, 0xea, 0xd8]
    test-crc [0x00, 0x00, 0x00, 0x04], [0xa2, 0x8a, 0xea, 0xd8]
    test-crc [0x00, 0x00, 0x00, 0x05], [0xa2, 0x8c, 0xea, 0xd8]
